!function(){function e(t,i,n){function a(o,s){if(!i[o]){if(!t[o]){var h="function"==typeof require&&require;if(!s&&h)return h(o,!0);if(r)return r(o,!0);var c=new Error("Cannot find module '"+o+"'");throw c.code="MODULE_NOT_FOUND",c}var u=i[o]={exports:{}};t[o][0].call(u.exports,function(e){return a(t[o][1][e]||e)},u,u.exports,e,t,i,n)}return i[o].exports}for(var r="function"==typeof require&&require,o=0;o<n.length;o++)a(n[o]);return a}return e}()({1:[function(e,t,i){"use strict";function n(e){return e&&e.__esModule?e:{default:e}}var a=e("./states/boot"),r=n(a),o=e("./states/preloader"),s=n(o),h=e("./states/scene_card"),c=n(h),u=e("./states/scene_custom_button"),l=n(u),d=e("./states/scene_glitch_sprite"),f=n(d),p=e("./states/scene_paper_letter"),g=n(p),b=e("./states/scene_stretching_element"),_=n(b),m=e("./states/scene_counter"),y=n(m),w=e("./states/scene_color_canvas"),v=n(w),P=e("./states/scene_dialogue_balloon"),k=n(P),O=new Phaser.Game(window.innerWidth,window.innerHeight-document.body.offsetHeight,Phaser.AUTO,"game_canvas");O.state.add("boot",new r.default),O.state.add("preloader",new s.default),O.state.add("scene_card",new c.default),O.state.add("scene_custom_button",new l.default),O.state.add("scene_glitch_sprite",new f.default),O.state.add("scene_paper_letter",new g.default),O.state.add("scene_stretching_element",new _.default),O.state.add("scene_counter",new y.default),O.state.add("scene_color_canvas",new v.default),O.state.add("scene_dialogue_balloon",new k.default),O.state.start("boot"),window.change_scene=function(e){O.state.start(e)}},{"./states/boot":2,"./states/preloader":3,"./states/scene_card":4,"./states/scene_color_canvas":5,"./states/scene_counter":6,"./states/scene_custom_button":7,"./states/scene_dialogue_balloon":8,"./states/scene_glitch_sprite":9,"./states/scene_paper_letter":10,"./states/scene_stretching_element":11}],2:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"preload",value:function(){this.load.image("preloader","assets/preloader.gif"),this.game.load.json("assets","./assets.json"),this.game.add.plugin(PhaserInput.Plugin)}},{key:"create",value:function(){this.game.input.maxPointers=1,this.game.scale.scaleMode=Phaser.ScaleManager.EXACT_FIT,this.game.scale.pageAlignHorizontally=!0,this.game.scale.pageAlignVertically=!0;this.game.state.start("preloader")}},{key:"setupResolutionSettings",value:function(e){var t=e.defaultWidth,i=e.defaultHeight,n=window.innerWidth,a=window.innerHeight,r=t/i,o=n/a,s=t,h=i;o<r?(h=2*Math.ceil(s/o/2),e.useStretchThreshold&&(h=Math.min(h,e.stretchThresholdHeight))):(s=2*Math.ceil(h*o/2),e.useStretchThreshold&&(s=Math.min(s,e.stretchThresholdWidth)));var c=n/s,u=a/h;this.game.scale.setGameSize(s,h),this.game.scale.setUserScale(c,u),this.game.screenSettings.defaultWidth=t,this.game.screenSettings.defaultHeight=i,this.game.screenSettings.gameWidth=s,this.game.screenSettings.gameHeight=h,this.game.screenSettings.scaleX=c,this.game.screenSettings.scaleY=u,this.game.screenSettings.offsetX=(s-t)/2,this.game.screenSettings.offsetY=(h-i)/2}},{key:"initGlobalVariables",value:function(){this.game.screenSettings={defaultWidth:0,defaultHeight:0,gameWidth:0,gameHeight:0,scaleX:0,scaleY:0,offsetX:0,offsetY:0},this.game.global={}}}]),t}(Phaser.State);i.default=s},{}],3:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(){n(this,t);var e=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.ready=!1,e}return r(t,e),o(t,[{key:"create",value:function(){}},{key:"preload",value:function(){this.load.onLoadComplete.addOnce(this.onLoadComplete,this);var e=this.game.cache.getJSON("assets");this.loadResources(e)}},{key:"update",value:function(){this.ready&&(document.getElementById("html-select").disabled=!1,this.game.state.start("scene_card"))}},{key:"loadResources",value:function(e){for(var t=0;t<e.children.length;t+=1){var i=e.children[t];if("folder"==i.type)this.loadResources(i);else{var n=i.name.slice(0,-4);if("png"==i.name.slice(-3))if(0===n.search("spritesheet")){var a=n.search("x"),r=n.search("_"),o=parseInt(n.substring(11,a)),s=parseInt(n.substring(a+1,r)),h=n.substring(r+1);this.game.load.spritesheet(h,i.path,o,s)}else this.game.load.image(n,i.path)}}}},{key:"loadFolder",value:function(){}},{key:"onLoadComplete",value:function(){this.ready=!0}}]),t}(Phaser.State);i.default=s},{}],4:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/card"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.card=new h.default(this.game,this.game.width/2,this.game.height/2,"card_front","card_back",!1),this.card.setFlippable()}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/card":12}],5:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/color_canvas"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.game.stage.backgroundColor="#e3e1e1",this.drawing=new h.default(this.game,this.game.width/2,this.game.height/2,"dog")}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/color_canvas":13}],6:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/counter"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.counter=new h.default(this.game,this.game.width/2,this.game.height/2),this.counter.x-=this.counter.width/2,this.counter.y-=this.counter.height/2,this.counter.inputEnabled=!0,this.counter.events.onInputDown.add(this.spin,this)}},{key:"spin",value:function(){var e=Math.floor(9999*Math.random());this.counter.setCounter(e)}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/counter":14}],7:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/custom_button"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.button=new h.default(this.game,this.game.width/2,this.game.height/2,"button",this._button_pressed,this)}},{key:"_button_pressed",value:function(){this.button.x=Math.random()*this.game.width,this.button.y=Math.random()*this.game.height,this.button.inputOut()}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/custom_button":15}],8:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/dialogue_balloon"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.dialogue=new h.default(this.game,this.game.width/2,this.game.height/2,"Hello World!",{font:"60px Arial"})}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/dialogue_balloon":16}],9:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/glitch_sprite"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.glitchsprite=new h.default(this.game,this.game.width/2,this.game.height/2,"glitch",!0),this.glitchsprite.setAnchor(.5,.5),this.glitchsprite.glitch()}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/glitch_sprite":17}],10:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/paper_letter"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.graphics=this.game.add.graphics(0,0),this.graphics.lineStyle(5,1118481,1),this.graphics.moveTo(0,this.game.height/2),this.graphics.lineTo(this.game.width,this.game.height/2),this.letter=new h.default(this.game,this.game.width+100,this.game.height/2,"letter"),this.letter.slide(this.game.width/2,this.game.height/2)}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/paper_letter":18}],11:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=e("../toolbox/phaser2/stretching_element"),h=function(e){return e&&e.__esModule?e:{default:e}}(s),c=function(e){function t(){return n(this,t),a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return r(t,e),o(t,[{key:"create",value:function(){this.background=this.game.add.image(0,0,"background"),this.background.scale.setTo(this.game.width/this.background.width,this.game.height/this.background.height),this.element=new h.default(this.game,this.game.width/2,this.game.height/2,"apple",0),this.element.enable(),this.element.on_drop.add(function(){this.element.enable()},this)}}]),t}(Phaser.State);i.default=c},{"../toolbox/phaser2/stretching_element":19}],12:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o,s){var h=arguments.length>5&&void 0!==arguments[5]&&arguments[5];n(this,t);var c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return c.game=e,c.yflip=h,c.anchor.set(.5),c.sides=c.game.add.image(0,0),c.shadow_scaler=c.game.add.image(0,0),c.frontSide=c.game.add.sprite(0,0,o),c.frontSide.anchor.set(.5),c.backSide=c.game.add.sprite(0,0,s),c.backSide.anchor.set(.5),c.frontSide.scale.setTo(c.backSide.width/c.frontSide.width,c.backSide.height/c.frontSide.height),c.highlight=c.game.add.sprite(0,0,"card_highlight"),c.highlight.scale.setTo((c.frontSide.width+40)/c.highlight.width,(c.frontSide.height+40)/c.highlight.height),c.highlight.anchor.set(.5),c.highlight.alpha=0,c.sides.addChild(c.highlight),c.sides.addChild(c.frontSide),c.sides.addChild(c.backSide),c.shadow=c.game.add.sprite(0,0,"card_shadow"),c.shadow.alpha=.8,c.shadow.anchor.set(.5),c.shadow.scale.setTo(c.frontSide.width/c.shadow.width,c.frontSide.height/c.shadow.height),c.shadow_scaler.addChild(c.shadow),c.addChild(c.shadow_scaler),c.addChild(c.sides),c.frontUp=!0,c.setSide(!0),c.flipTween=null,c.shadowTween=null,c.flipState=0,c.verticalFlip=h,c.shadowHoverTween=null,c.sidesHoverTween=null,c.flipped=new Phaser.Signal,c.game.add.existing(c),c}return r(t,e),o(t,[{key:"setBackSide",value:function(e){this.backSide.loadTexture(e),this.backSide.scale.set(1),this.backSide.scale.setTo(this.frontSide.width/this.backSide.width,this.frontSide.height/this.backSide.height)}},{key:"setHovering",value:function(e){arguments.length>1&&void 0!==arguments[1]&&!arguments[1]?(this.sides.x=-e,this.sides.y=-e,this.shadow.x=e,this.shadow.y=e):(this.shadowHoverTween&&(this.shadowHoverTween.stop(),this.sidesHoverTween.stop()),this.game.add.tween(this.sides).to({x:-e,y:-e},500,Phaser.Easing.Cubic.Out,!0),this.game.add.tween(this.shadow).to({x:e,y:e},500,Phaser.Easing.Cubic.Out,!0))}},{key:"flip",value:function(){(!(arguments.length>0&&void 0!==arguments[0])||arguments[0])&&this.flipped.dispatch(this),this.bringToTop();var e=this.verticalFlip;this.flipTween&&(this.flipTween.stop(),this.shadowTween.stop()),0==this.flipState||2==this.flipState?!1===e?(this.flipTween=this.game.add.tween(this.sides.scale).to({x:0,y:1.2},400,Phaser.Easing.Cubic.In,!0),this.shadowTween=this.game.add.tween(this.shadow_scaler.scale).to({x:.1,y:1.1},400,Phaser.Easing.Cubic.In,!0),this.flipState=1,this.flipTween.onComplete.add(function(){this.setSide(!this.frontUp),this.flip(!1)},this)):(this.flipTween=this.game.add.tween(this.sides.scale).to({x:1.2,y:0},400,Phaser.Easing.Cubic.In,!0),this.shadowTween=this.game.add.tween(this.shadow_scaler.scale).to({x:1.1,y:.1},400,Phaser.Easing.Cubic.In,!0),this.flipState=1,this.flipTween.onComplete.add(function(){this.setSide(!this.frontUp),this.flip(!1)},this)):1==this.flipState&&(this.flipTween=this.game.add.tween(this.sides.scale).to({x:1,y:1},400,Phaser.Easing.Cubic.Out,!0),this.shadowTween=this.game.add.tween(this.shadow_scaler.scale).to({x:1,y:1},400,Phaser.Easing.Cubic.Out,!0),this.flipState=2)}},{key:"setSide",value:function(e){this.frontUp=e,this.frontSide.alpha=e?1:0,this.backSide.alpha=e?0:1}},{key:"unsetFlippable",value:function(){this.setHovering(0),this.highlight.alpha=0,this.events.onInputDown.removeAll(),this.events.onInputOver.removeAll(),this.events.onInputOut.removeAll(),this.inputEnabled=!1}},{key:"setFlippable",value:function(){this.inputEnabled=!0,this.setHovering(5),this.events.onInputDown.add(function(){this.flip()},this),this.game.device.desktop&&(this.events.onInputOver.add(function(){this.highlight.alpha=1,this.setHovering(10),this.bringToTop()},this),this.events.onInputOut.add(function(){this.highlight.alpha=0,this.setHovering(5)},this))}}]),t}(Phaser.Sprite);i.default=s},{}],13:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o){n(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return s.game=e,s.sprite=o,s.enable_tint=!0,s.anchor.set(.5),s.sprite_width=s.game.cache.getImage(s.sprite).width,s.sprite_height=s.game.cache.getImage(s.sprite).height,s.btm_mask=s.game.make.bitmapData(s.sprite_width,s.sprite_height),s.btm_mask.load(s.sprite),s.btm_mask.replaceRGB(0,0,0,255,255,255,255,255),s.btm_mask.replaceRGB(0,0,0,0,0,0,0,255),s.btm_mask.replaceRGB(255,255,255,255,0,0,0,0),s.btm_texture=s.game.make.bitmapData(s.sprite_width,s.sprite_height),s.back_tint=14934497,s.back_tint_name="",s.back_sprite=new Phaser.Sprite(s.game,0,0,"blot"),s.back_sprite.tint=s.back_tint,s.rgb_back={r:227,g:225,b:225,a:255},s.back_texture=s.game.make.bitmapData(s.sprite_width,s.sprite_height),s.back_texture.fill(s.rgb_back.r,s.rgb_back.g,s.rgb_back.b,s.rgb_back.a),s.btm_texture.alphaMask(s.back_texture,s.btm_mask),s.canvasimage=s.game.add.image(0,0,s.btm_texture),s.canvasimage.anchor.set(.5),s.canvasimage_texture=s.game.add.image(0,0,s.sprite),s.canvasimage_texture.anchor.set(.5),s.animate=!1,s.addChild(s.canvasimage),s.addChild(s.canvasimage_texture),Phaser.Device.desktop&&(s.canvasimage.inputEnabled=!0,s.canvasimage.events.onInputDown.add(s.mouseClick,s)),s.front_tint_name="",s.game.add.existing(s),s}return r(t,e),o(t,[{key:"setBackTint",value:function(e,t){this.back_tint=e,this.back_tint_name=t}},{key:"update",value:function(){this.animate&&(this.back_sprite_width+=20,this.back_sprite_height+=20,this.draw_and_render(),this.back_sprite_width>3e3&&(this.animate=!1))}},{key:"setEnableTint",value:function(e){this.enable_tint=e}},{key:"simulateClick",value:function(){this.enable_tint&&(this.back_tint!=this.back_sprite.tint&&(this.back_sprite.tint=this.back_tint),this.back_texture.fill(this.rgb_back.r,this.rgb_back.g,this.rgb_back.b,this.rgb_back.a),this.rgb_back.r=this.back_tint>>16,this.rgb_back.g=(65280&this.back_tint)>>8,this.rgb_back.b=255&this.back_tint,this.back_sprite_x=200,this.back_sprite_y=200,this.back_sprite_width=0,this.back_sprite_height=0,this.front_tint_name=this.back_tint_name,this.draw_and_render(),this.animate=!0)}},{key:"mouseClick",value:function(e){this.enable_tint&&(this.back_tint=Phaser.Color.getRandomColor(50,255,255),this.back_tint!=this.back_sprite.tint&&(this.back_sprite.tint=this.back_tint),this.back_texture.fill(this.rgb_back.r,this.rgb_back.g,this.rgb_back.b,this.rgb_back.a),this.rgb_back.r=this.back_tint>>16,this.rgb_back.g=(65280&this.back_tint)>>8,this.rgb_back.b=255&this.back_tint,this.back_sprite_x=this.game.input.x-this.worldPosition.x+e.width/2,this.back_sprite_y=this.game.input.y-this.worldPosition.y+e.height/2,this.back_sprite_width=0,this.back_sprite_height=0,this.front_tint_name=this.back_tint_name,this.draw_and_render(),this.animate=!0)}},{key:"draw_and_render",value:function(){this.back_texture.draw(this.back_sprite,this.back_sprite_x-this.back_sprite_width/2,this.back_sprite_y-this.back_sprite_height/2,this.back_sprite_width,this.back_sprite_height),this.btm_texture.alphaMask(this.back_texture,this.btm_mask)}}]),t}(Phaser.Sprite);i.default=s},{}],14:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r){n(this,t);var o=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,"mcdu"));o.game=e;var s=[new Phaser.Point(22,81),new Phaser.Point(78,79),new Phaser.Point(81,158),new Phaser.Point(25,159)],h=[new Phaser.Point(84,78),new Phaser.Point(139,78),new Phaser.Point(141,159),new Phaser.Point(87,160)],c=[new Phaser.Point(144,76),new Phaser.Point(200,75),new Phaser.Point(202,158),new Phaser.Point(145,159)],u=[new Phaser.Point(205,76),new Phaser.Point(261,74),new Phaser.Point(259,159),new Phaser.Point(207,159)];o.overSprite=o.game.add.sprite(0,0,"mcdu");var l=o.game.add.graphics(0,0);l.beginFill(16777215),l.drawPolygon(s),l.drawPolygon(h),l.drawPolygon(c),l.drawPolygon(u),l.endFill(),o.addChild(l),o.overSprite.mask=l,o.addChild(o.overSprite),o.slots=[],o.slots_pos=[0,0,0,0],o.slots.push(o.game.add.sprite(52,116)),o.slots.push(o.game.add.sprite(114,116)),o.slots.push(o.game.add.sprite(174,116)),o.slots.push(o.game.add.sprite(232,116));for(var d=0;d<o.slots.length;d++)o.overSprite.addChild(o.slots[d]);o.slot_offset=60;for(var d=0;d<4;d++)for(var f=0;f<10;f++){var p=o.game.add.text(0,-f*o.slot_offset,f,{font:"50px Arial"});p.anchor.set(.5),o.slots[d].addChild(p)}return o.game.add.existing(o),o}return r(t,e),o(t,[{key:"addToDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.slots_pos[e]+=t,this.game.add.tween(this.slots[e]).to({y:116+this.slots_pos[e]*this.slot_offset},2e3,Phaser.Easing.Elastic.Out,!0)}},{key:"subToDigit",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;this.slots_pos[e]-=t,this.game.add.tween(this.slots[e]).to({y:116+this.slots_pos[e]*this.slot_offset},2e3,Phaser.Easing.Elastic.Out,!0)}},{key:"isCorrect",value:function(){return!(this.slots_pos[0]>9||this.slots_pos[1]>9||this.slots_pos[2]>9||this.slots_pos[3]>9)}},{key:"getNumber",value:function(){var e=0;return e+=this.slots_pos[3],e+=10*this.slots_pos[2],e+=100*this.slots_pos[1],e+=1e3*this.slots_pos[0]}},{key:"setCounter",value:function(e){var t=[0,0,0,0];t[3]=e%10,t[2]=Math.floor(e/10)%10,t[1]=Math.floor(e/100)%10,t[0]=Math.floor(e/1e3);for(var i=0;i<4;i++)this.game.add.tween(this.slots[i]).to({y:116+t[i]*this.slot_offset},2e3,Phaser.Easing.Elastic.Out,!0);this.slots_pos=t}}]),t}(Phaser.Sprite);i.default=s},{}],15:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o,s,h){n(this,t);var c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r-e.cache.getImage(o).height/2,o,s,h,void 0,0,0));return c.anchor.setTo(.5,.5),c.game=e,c.onInputOver.add(c.inputOver,c),c.onInputOut.add(c.inputOut,c),c.defaultScale=1,c.hover_button=!1,e.add.existing(c),c}return r(t,e),o(t,[{key:"set_hover_button",value:function(e){this.hover_button=!!e}},{key:"setScale",value:function(e){this.defaultScale=e,
this.scale.setTo(this.defaultScale,this.defaultScale)}},{key:"inputOver",value:function(){this.hover_button||this.game.add.tween(this.scale).to({x:1.1*this.defaultScale,y:1.1*this.defaultScale},500,Phaser.Easing.Cubic.Out,!0)}},{key:"inputOut",value:function(){this.hover_button||this.game.add.tween(this.scale).to({x:this.defaultScale,y:this.defaultScale},500,Phaser.Easing.Cubic.Out,!0)}}]),t}(Phaser.Button);i.default=s},{}],16:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o,s){var h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:0,c=arguments.length>6&&void 0!==arguments[6]?arguments[6]:0,u=arguments.length>7&&void 0!==arguments[7]&&arguments[7];n(this,t);var l=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));l.game=e,l.game.add.existing(l),l.text=l.game.add.text(0,0,o,s),l.text.anchor.set(.5),l.text.alpha=0,l.mirror=u,l.target_width=0===h?l.text.width+20:h,l.target_height=0===c?l.text.height+20:c,l.balao_corpo=l.game.add.image(0,0,"balao_corpo"),l.balao_corpo.anchor.set(.5),l.balao_corpo_size=[l.balao_corpo.width,l.balao_corpo.height],l.balao_corpo.scale.setTo(50/l.balao_corpo.width,0),l.addChild(l.balao_corpo),l.balao_rabo=l.game.add.image(.3*l.text.width,.5*l.text.height+8,"balao_rabo"),l.balao_rabo.anchor.setTo(.5,0),l.balao_rabo.alpha=0,l.balao_rabo.scale.set(.1*l.text.width/l.balao_rabo.width),l.mirror&&(l.balao_rabo.x=.3*-l.text.width,l.balao_rabo.scale.x*=-1),l.addChild(l.balao_rabo),l.addChild(l.text);l.game.add.tween(l.balao_corpo.scale).to({y:l.target_height/l.balao_corpo_size[1]},300,Phaser.Easing.Linear.None,!0),l.game.add.tween(l.balao_corpo.scale).to({x:l.target_width/l.balao_corpo_size[0]},300,Phaser.Easing.Linear.None,!0,300),l.game.add.tween(l.balao_rabo).to({alpha:1},500,Phaser.Easing.Linear.None,!0,600),l.game.add.tween(l.text).to({alpha:1},500,Phaser.Easing.Linear.None,!0,600);return l}return r(t,e),o(t,[{key:"changeText",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:null,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:null,a=arguments.length>4&&void 0!==arguments[4]&&arguments[4];this.text_fadein&&this.text_fadein.stop(),this.text_fadeout&&this.text_fadeout.stop(),!0===a?this.game.add.tween(this.balao_rabo).to({alpha:0},300,Phaser.Easing.Linear.None,!0):this.game.add.tween(this.balao_rabo).to({alpha:1},300,Phaser.Easing.Linear.None,!0),this.text_fadeout=this.game.add.tween(this.text).to({alpha:0},300,Phaser.Easing.Linear.None,!0),this.text_fadeout.onComplete.add(function(){this.text.setText(e),this.text_fadein=this.game.add.tween(this.text).to({alpha:1},300,Phaser.Easing.Linear.None,!0),this.target_width=this.text.width+20,this.target_height=this.text.height+20,this.game.add.tween(this.balao_corpo.scale).to({x:this.target_width/this.balao_corpo_size[0],y:this.target_height/this.balao_corpo_size[1]},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(this).to({x:t||this.x,y:i||this.y},300,Phaser.Easing.Linear.None,!0),null!==n&&this.mirror!==n&&(this.mirror=n,this.game.add.tween(this.balao_rabo.scale).to({x:-this.balao_rabo.scale.x},300,Phaser.Easing.Linear.None,!0)),this.mirror?this.game.add.tween(this.balao_rabo).to({x:.3*-this.text.width,y:.5*this.text.height+8},300,Phaser.Easing.Linear.None,!0):this.game.add.tween(this.balao_rabo).to({x:.3*this.text.width,y:.5*this.text.height+8},300,Phaser.Easing.Linear.None,!0)},this)}},{key:"purge",value:function(){var e=(this.game.add.tween(this.text).to({alpha:0},200,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.balao_corpo.scale).to({y:0},300,Phaser.Easing.Linear.None,!0,300),this.game.add.tween(this.balao_corpo.scale).to({x:0},300,Phaser.Easing.Linear.None,!0),this.game.add.tween(this.balao_rabo).to({alpha:0},200,Phaser.Easing.Linear.None,!0),this.game.time.create());e.add(600,function(){this.destroy()},this),e.start()}}]),t}(Phaser.Sprite);i.default=s},{}],17:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o){var s=!(arguments.length>4&&void 0!==arguments[4])||arguments[4],h=arguments.length>5&&void 0!==arguments[5]?arguments[5]:3500;n(this,t);var c=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));c.game.add.existing(c),c.game=e,c.glitch_timer=s,c.image_width=c.game.cache.getImage(o).width,c.image_height=c.game.cache.getImage(o).height;var u=new Phaser.Rectangle(0,0,0,0);u.width=c.image_width,u.height=c.image_height/4,c.textures=[];for(var l=0;l<4;l++){var d=c.game.add.image(0,0,o);d.y=d.height/4*l,u.y=d.height/4*l,d.crop(u),c.addChild(d),c.textures.push(d)}c.glitch_xoffset=50;var h=3500+1e3*Math.random();return c.glitchtimer=c.game.time.create(),c.glitchtimer.loop(h,function(){this._glitch(),this.temp_timer&&this.temp_timer.destroy(),this.temp_timer=this.game.time.create(),this.temp_timer.add(100,this._glitch,this),this.temp_timer.add(200,this._glitch,this),this.temp_timer.add(300,this.restore,this),this.temp_timer.start()},c),c.glitch_timer&&c.glitchtimer.start(),c}return r(t,e),o(t,[{key:"setAnchor",value:function(e,t){for(var i=0;i<this.textures.length;i++)this.textures[i].anchor.setTo(e,t)}},{key:"glitch",value:function(){this._glitch(),this.temp_timer&&this.temp_timer.destroy(),this.temp_timer=this.game.time.create(),this.temp_timer.add(100,this._glitch,this),this.temp_timer.add(200,this._glitch,this),this.temp_timer.add(300,this.restore,this),this.temp_timer.start()}},{key:"_glitch",value:function(){for(var e=0;e<this.textures.length;e++)this.textures[e].x=Math.random()*(2*this.glitch_xoffset)-this.glitch_xoffset}},{key:"restore",value:function(){for(var e=0;e<this.textures.length;e++)this.textures[e].x=0}}]),t}(Phaser.Sprite);i.default=s},{}],18:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o){n(this,t);var s=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r,o));return s.game=e,s.anchor.setTo(75/s.width,71/s.height),s.game.add.existing(s),s}return r(t,e),o(t,[{key:"slide",value:function(e,t){var i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0;this.game.add.tween(this).to({x:e},1e3,Phaser.Easing.Cubic.Out,!0,i),this.game.add.tween(this).to({y:t},1e3,Phaser.Easing.Cubic.Out,!0,i);var n=null;n=e>this.x?this.game.add.tween(this).to({angle:30},200,Phaser.Easing.Quadratic.Out,!0,i):this.game.add.tween(this).to({angle:-30},200,Phaser.Easing.Quadratic.Out,!0,i),n.onComplete.add(function(){this.game.add.tween(this).to({angle:0},1400,Phaser.Easing.Elastic.Out,!0,300)},this)}}]),t}(Phaser.Sprite);i.default=s},{}],19:[function(e,t,i){"use strict";function n(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function a(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t}function r(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)}Object.defineProperty(i,"__esModule",{value:!0});var o=function(){function e(e,t){for(var i=0;i<t.length;i++){var n=t[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(e,n.key,n)}}return function(t,i,n){return i&&e(t.prototype,i),n&&e(t,n),t}}(),s=function(e){function t(e,i,r,o,s){n(this,t);var h=a(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,i,r));return h.image=o,h.game=e,h.anchor.setTo(.5,.5),h.tx=i,h.ty=r,h.image_angle=s,h.render_sprite=new Phaser.Sprite(h.game,0,0,h.image),h.render_sprite.anchor.setTo(.5,.5),h.addChild(h.render_sprite),h.distortable=!0,h.mouse_anchor=new Phaser.Point,h.mouse_center=new Phaser.Point,h.update_distort=!1,h.update_pos=!1,h.render_sprite.inputEnabled=!0,h.render_sprite.input.useHandCursor=!0,h.render_sprite.input.pixelPerfectOver=!0,h.render_sprite.input.pixelPerfectClick=!0,h.render_sprite.events.onInputDown.add(h.inputDown,h),h.render_sprite.events.onInputUp.add(h.inputUp,h),h.render_sprite.angle=h.image_angle,h.render_sprite.inputEnabled=!1,h.on_drop=new Phaser.Signal,h.on_pop=new Phaser.Signal,h.game.add.existing(h),h}return r(t,e),o(t,[{key:"disable",value:function(){this.render_sprite.inputEnabled=!1}},{key:"enable",value:function(){this.distortable=!0,this.render_sprite.inputEnabled=!0,this.render_sprite.input.useHandCursor=!0,this.render_sprite.input.pixelPerfectOver=!0,this.render_sprite.input.pixelPerfectClick=!0}},{key:"update",value:function(){this.update_distort&&(1==this.distortable&&(this.mouse_angle=Phaser.Point.angle(this.mouse_anchor,new Phaser.Point(this.game.input.x,this.game.input.y)),this.x=this.game.input.x+this.mouse_center.x,this.y=this.game.input.y+this.mouse_center.y,this.scale.x=1+.015*Phaser.Point.distance(this.mouse_anchor,new Phaser.Point(this.game.input.x,this.game.input.y)),this.render_sprite.angle=-Phaser.Math.radToDeg(this.mouse_angle)+this.image_angle,this.angle=Phaser.Math.radToDeg(this.mouse_angle)),(this.scale.x>2||0==this.distortable)&&(this.distortable&&(this.on_pop.dispatch(this,this.position),this.taken_wobble()),this.distortable=!1,this.update_distort=!1,this.update_pos=!0)),this.update_pos&&(this.x=this.game.input.x+this.mouse_center.x,this.y=this.game.input.y+this.mouse_center.y)}},{key:"reset",value:function(){this.distortable=!0,this.wobble(!0)}},{key:"inputDown",value:function(){this.mouse_anchor.x=this.game.input.x,this.mouse_anchor.y=this.game.input.y,this.mouse_center.x=this.x-this.mouse_anchor.x,this.mouse_center.y=this.y-this.mouse_anchor.y,this.update_distort=!0}},{key:"inputUp",value:function(){this.update_distort&&this.distortable?(this.wobble(!1),this.update_distort=!1):this.update_pos&&(this.tx=this.x,this.ty=this.y,this.update_pos=!1,this.on_drop.dispatch(this,this.position))}},{key:"wobble",value:function(){arguments.length>0&&void 0!==arguments[0]&&arguments[0]&&(this.scale.x=1.6,this.scale.y=1.6),this.game.add.tween(this.scale).to({x:1,y:1},500,Phaser.Easing.Bounce.Out,!0),this.game.add.tween(this).to({x:this.tx,y:this.ty},500,Phaser.Easing.Bounce.Out,!0)}},{key:"taken_wobble",value:function(){this.scale.x=1.8,this.scale.y=2,this.game.add.tween(this.scale).to({x:1,y:1},1e3,Phaser.Easing.Bounce.Out,!0)}}]),t}(Phaser.Sprite);i.default=s},{}]},{},[1]);
